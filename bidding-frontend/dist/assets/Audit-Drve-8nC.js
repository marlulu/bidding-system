import{g as G,u as J}from"./supplier-TM0A0FTE.js";import{_ as q,r as d,s as H,k as w,o as g,g as t,w as a,e as u,E as x,G as K,D as O,h as V,d as Q,j as l,t as i,m as D,F as z,J as R}from"./index-BnRauf0p.js";const W={class:"supplier-audit-container"},X={class:"card-header"},Y={class:"pagination"},Z={__name:"Audit",setup(h){const b=d(!1),S=d([]),N=d(0),y=d(1),k=d(10),C=d(""),m=d(!1),n=d({}),_=async()=>{b.value=!0;try{const s=await G({page:y.value,size:k.value,status:C.value});S.value=s.records,N.value=s.total}catch{x.error("加载数据失败")}finally{b.value=!1}},E=s=>({0:"warning",1:"success",2:"danger"})[s]||"info",P=s=>({0:"待审核",1:"已认证",2:"已拒绝"})[s]||"未知",T=s=>{n.value=s,m.value=!0},f=(s,e)=>{const p=e===1?"通过":"拒绝";R.confirm(`确定要${p}该供应商的入驻申请吗？`,"审核确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:e===1?"success":"warning"}).then(async()=>{try{await J(s.id,e),x.success(`已${p}`),m.value=!1,_()}catch{x.error("操作失败")}})};return H(_),(s,e)=>{const p=u("el-radio-button"),$=u("el-radio-group"),c=u("el-table-column"),U=u("el-tag"),v=u("el-button"),A=u("el-table"),M=u("el-pagination"),F=u("el-card"),r=u("el-descriptions-item"),I=u("el-descriptions"),L=u("el-dialog"),j=K("loading");return g(),w("div",W,[t(F,null,{header:a(()=>[V("div",X,[e[11]||(e[11]=V("span",{class:"title"},"供应商入驻审核",-1)),t($,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=o=>C.value=o),onChange:_},{default:a(()=>[t(p,{label:""},{default:a(()=>[...e[7]||(e[7]=[l("全部",-1)])]),_:1}),t(p,{label:0},{default:a(()=>[...e[8]||(e[8]=[l("待审核",-1)])]),_:1}),t(p,{label:1},{default:a(()=>[...e[9]||(e[9]=[l("已认证",-1)])]),_:1}),t(p,{label:2},{default:a(()=>[...e[10]||(e[10]=[l("已拒绝",-1)])]),_:1})]),_:1},8,["modelValue"])])]),default:a(()=>[O((g(),Q(A,{data:S.value,style:{width:"100%"}},{default:a(()=>[t(c,{prop:"companyName",label:"公司名称","min-width":"200","show-overflow-tooltip":""}),t(c,{prop:"industry",label:"行业",width:"120"}),t(c,{prop:"contactName",label:"联系人",width:"120"}),t(c,{prop:"contactPhone",label:"联系电话",width:"150"}),t(c,{prop:"createTime",label:"申请时间",width:"180"}),t(c,{prop:"status",label:"状态",width:"100"},{default:a(({row:o})=>[t(U,{type:E(o.status)},{default:a(()=>[l(i(P(o.status)),1)]),_:2},1032,["type"])]),_:1}),t(c,{label:"操作",width:"200",fixed:"right"},{default:a(({row:o})=>[t(v,{link:"",type:"primary",onClick:B=>T(o)},{default:a(()=>[...e[12]||(e[12]=[l("详情",-1)])]),_:1},8,["onClick"]),o.status===0?(g(),w(z,{key:0},[t(v,{link:"",type:"success",onClick:B=>f(o,1)},{default:a(()=>[...e[13]||(e[13]=[l("通过",-1)])]),_:1},8,["onClick"]),t(v,{link:"",type:"danger",onClick:B=>f(o,2)},{default:a(()=>[...e[14]||(e[14]=[l("拒绝",-1)])]),_:1},8,["onClick"])],64)):D("",!0)]),_:1})]),_:1},8,["data"])),[[j,b.value]]),V("div",Y,[t(M,{"current-page":y.value,"onUpdate:currentPage":e[1]||(e[1]=o=>y.value=o),"page-size":k.value,"onUpdate:pageSize":e[2]||(e[2]=o=>k.value=o),total:N.value,layout:"total, prev, pager, next",onCurrentChange:_},null,8,["current-page","page-size","total"])])]),_:1}),t(L,{modelValue:m.value,"onUpdate:modelValue":e[6]||(e[6]=o=>m.value=o),title:"供应商申请详情",width:"700px"},{footer:a(()=>[t(v,{onClick:e[3]||(e[3]=o=>m.value=!1)},{default:a(()=>[...e[15]||(e[15]=[l("关闭",-1)])]),_:1}),n.value.status===0?(g(),w(z,{key:0},[t(v,{type:"success",onClick:e[4]||(e[4]=o=>f(n.value,1))},{default:a(()=>[...e[16]||(e[16]=[l("审核通过",-1)])]),_:1}),t(v,{type:"danger",onClick:e[5]||(e[5]=o=>f(n.value,2))},{default:a(()=>[...e[17]||(e[17]=[l("拒绝申请",-1)])]),_:1})],64)):D("",!0)]),default:a(()=>[t(I,{column:2,border:""},{default:a(()=>[t(r,{label:"公司名称",span:2},{default:a(()=>[l(i(n.value.companyName),1)]),_:1}),t(r,{label:"信用代码"},{default:a(()=>[l(i(n.value.companyCode),1)]),_:1}),t(r,{label:"行业"},{default:a(()=>[l(i(n.value.industry),1)]),_:1}),t(r,{label:"法人代表"},{default:a(()=>[l(i(n.value.legalPerson),1)]),_:1}),t(r,{label:"企业规模"},{default:a(()=>[l(i(n.value.scale),1)]),_:1}),t(r,{label:"联系人"},{default:a(()=>[l(i(n.value.contactName),1)]),_:1}),t(r,{label:"联系电话"},{default:a(()=>[l(i(n.value.contactPhone),1)]),_:1}),t(r,{label:"联系邮箱",span:2},{default:a(()=>[l(i(n.value.contactEmail),1)]),_:1}),t(r,{label:"公司地址",span:2},{default:a(()=>[l(i(n.value.address),1)]),_:1}),t(r,{label:"公司简介",span:2},{default:a(()=>[l(i(n.value.description),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},ae=q(Z,[["__scopeId","data-v-42b46602"]]);export{ae as default};
