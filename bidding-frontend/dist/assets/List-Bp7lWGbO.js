import{_ as O,r as D,a as M,i as Q,k as W,c as m,o as d,b as i,d as e,D as X,w as o,e as s,G as Y,l as h,q as S,u as Z,F as U,v as E,g as u,t as p,m as f,H as ee,C as te,I as le,E as oe}from"./index-8BbQxS2W.js";import{g as ae}from"./supplier-FRNaxnwQ.js";import{u as se}from"./user-CoC7bmMY.js";import"./request-BHOxzfOV.js";const ne={class:"supplier-list container"},ie={class:"filter-section"},re={class:"tag-cloud"},de={class:"supplier-logo"},ce={class:"name"},ue={class:"industry"},pe={class:"tags"},_e={class:"card-footer"},me={class:"pagination"},fe={__name:"List",setup(ve){const C=Z(),q=Q(),N=se(),v=D(!1),y=D([]),$=["全部","信息技术","建筑工程","医疗器械","办公用品","咨询服务","物流运输"],n=M({industry:q.query.industry||"",scale:"",qualificationLevel:"",keyword:""}),r=M({page:1,size:12,total:0}),g=async()=>{v.value=!0;try{const a={...n};a.industry==="全部"&&(a.industry="");const t=await ae({page:r.page,size:r.size,...a});y.value=t.records,r.total=t.total}catch(a){console.error("加载供应商列表失败",a)}finally{v.value=!1}},w=()=>{r.page=1,g()},A=a=>{n.industry=a,w()},I=a=>{C.push(`/suppliers/detail/${a}`)},B=a=>{oe.success(`已向 ${a.companyName} 发送联系请求，请等待回复。`)},R=a=>({LARGE:"大型企业",MEDIUM:"中型企业",SMALL:"小型企业"})[a]||a;return W(()=>{g()}),(a,t)=>{const k=s("el-tag"),F=s("el-divider"),c=s("el-option"),L=s("el-select"),_=s("el-form-item"),V=s("el-icon"),b=s("el-button"),G=s("el-input"),j=s("el-form"),z=s("el-card"),H=s("el-col"),P=s("el-row"),T=s("el-empty"),J=s("el-pagination"),K=Y("loading");return d(),m("div",ne,[t[9]||(t[9]=i("h1",{class:"page-title"},"优质供应商库",-1)),e(z,{class:"filter-card",shadow:"never"},{default:o(()=>[i("div",ie,[t[6]||(t[6]=i("span",{class:"label"},"行业分类：",-1)),i("div",re,[(d(),m(U,null,E($,l=>e(k,{key:l,effect:n.industry===l?"dark":"plain",class:"filter-tag",onClick:x=>A(l)},{default:o(()=>[u(p(l),1)]),_:2},1032,["effect","onClick"])),64))])]),e(F,{"border-style":"dashed"}),e(j,{inline:!0,model:n},{default:o(()=>[e(_,{label:"企业规模"},{default:o(()=>[e(L,{modelValue:n.scale,"onUpdate:modelValue":t[0]||(t[0]=l=>n.scale=l),placeholder:"全部规模",clearable:"",style:{width:"150px"}},{default:o(()=>[e(c,{label:"大型企业",value:"LARGE"}),e(c,{label:"中型企业",value:"MEDIUM"}),e(c,{label:"小型企业",value:"SMALL"})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"资质等级"},{default:o(()=>[e(L,{modelValue:n.qualificationLevel,"onUpdate:modelValue":t[1]||(t[1]=l=>n.qualificationLevel=l),placeholder:"全部等级",clearable:"",style:{width:"150px"}},{default:o(()=>[e(c,{label:"一级资质",value:"一级资质"}),e(c,{label:"二级资质",value:"二级资质"}),e(c,{label:"三级资质",value:"三级资质"})]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:o(()=>[e(G,{modelValue:n.keyword,"onUpdate:modelValue":t[2]||(t[2]=l=>n.keyword=l),placeholder:"搜索供应商名称",clearable:"",style:{width:"250px"}},{append:o(()=>[e(b,{onClick:w},{default:o(()=>[e(V,null,{default:o(()=>[e(f(ee))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),f(N).isAdmin()?(d(),h(_,{key:0},{default:o(()=>[e(b,{type:"success",onClick:t[3]||(t[3]=l=>f(C).push("/suppliers/create"))},{default:o(()=>[...t[7]||(t[7]=[u("新增供应商",-1)])]),_:1})]),_:1})):S("",!0)]),_:1},8,["model"])]),_:1}),X((d(),m("div",null,[e(P,{gutter:20},{default:o(()=>[(d(!0),m(U,null,E(y.value,l=>(d(),h(H,{xs:24,sm:12,md:6,key:l.id},{default:o(()=>[e(z,{class:"card-item supplier-card",shadow:"hover",onClick:x=>I(l.id)},{default:o(()=>[i("div",de,[e(V,{size:40,color:"#003366"},{default:o(()=>[e(f(te))]),_:1})]),i("h3",ce,p(l.companyName),1),i("p",ue,p(l.industry),1),i("div",pe,[e(k,{size:"small",type:"info"},{default:o(()=>[u(p(R(l.scale)),1)]),_:2},1024),e(k,{size:"small",type:"success",style:{"margin-left":"5px"}},{default:o(()=>[u(p(l.qualificationLevel||"认证供应商"),1)]),_:2},1024)]),i("div",_e,[e(b,{type:"primary",plain:"",size:"small",onClick:le(x=>B(l),["stop"])},{default:o(()=>[...t[8]||(t[8]=[u("联系供应商",-1)])]),_:1},8,["onClick"])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),y.value.length===0?(d(),h(T,{key:0,description:"暂无相关供应商信息"})):S("",!0),i("div",me,[e(J,{"current-page":r.page,"onUpdate:currentPage":t[4]||(t[4]=l=>r.page=l),"page-size":r.size,"onUpdate:pageSize":t[5]||(t[5]=l=>r.size=l),total:r.total,layout:"total, prev, pager, next, jumper",onCurrentChange:g},null,8,["current-page","page-size","total"])])])),[[K,v.value]])])}}},he=O(fe,[["__scopeId","data-v-6b6a1bed"]]);export{he as default};
