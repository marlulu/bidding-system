import{_ as j,u as G,c as H,a as J,r as O,b as P,d as v,o as p,w as o,e as n,f as Q,g as t,h as l,i as d,p as X,j as s,k as Y,t as Z,l as h,m as ee,F as oe,T as te,n as ne,q as N,E as f}from"./index-C0_KmiTV.js";const le={class:"header-content"},se={class:"user-info"},ae={class:"el-dropdown-link"},re={class:"username"},ie={class:"footer-content"},de={class:"footer-section"},ue={class:"login-options"},me={style:{"margin-top":"15px","text-align":"center"}},pe="https://api.dicebear.com/7.x/avataaars/svg?seed=default",fe={__name:"index",setup(_e){const x=J(),_=Q(),i=G(),U=H(()=>{const a=x.path;return a==="/"?"/":a.startsWith("/announcements")?"/announcements":a.startsWith("/suppliers")?"/suppliers":a.startsWith("/policies")?"/policies":a.startsWith("/notices")?"/notices":a}),w=O(!1),u=P({username:"",password:"",remember:!1}),y=async()=>{if(!u.username||!u.password)return f.warning("请输入用户名和密码");w.value=!0;try{await i.login(u),f.success("登录成功"),i.loginDialogVisible=!1;const a=x.query.redirect;a&&_.push(a)}catch(a){f.error(a.message||"登录失败")}finally{w.value=!1}},b=()=>{f.info("注册功能开发中...")},B=a=>{a==="logout"?(i.logout(),_.push("/"),f.success("已退出登录")):_.push(`/${a}`)};return(a,e)=>{const k=n("el-icon"),m=n("el-menu-item"),W=n("el-menu"),$=n("el-avatar"),g=n("el-dropdown-item"),z=n("el-dropdown-menu"),E=n("el-dropdown"),V=n("el-button"),K=n("el-header"),R=n("router-view"),S=n("el-main"),c=n("el-link"),T=n("el-footer"),C=n("el-input"),D=n("el-form-item"),q=n("el-checkbox"),A=n("el-form"),L=n("el-dialog"),M=n("el-container");return p(),v(M,{class:"layout-container"},{default:o(()=>[t(K,{class:"header"},{default:o(()=>[l("div",le,[l("div",{class:"logo",onClick:e[0]||(e[0]=r=>d(_).push("/"))},[t(k,{size:30,color:"#fff"},{default:o(()=>[t(d(X))]),_:1}),e[7]||(e[7]=l("span",null,"内部招标采购门户",-1))]),t(W,{mode:"horizontal","default-active":U.value,"background-color":"#003366","text-color":"#fff","active-text-color":"#FF6600",router:"",class:"nav-menu"},{default:o(()=>[t(m,{index:"/"},{default:o(()=>[...e[8]||(e[8]=[s("首页",-1)])]),_:1}),t(m,{index:"/announcements"},{default:o(()=>[...e[9]||(e[9]=[s("招标信息",-1)])]),_:1}),t(m,{index:"/suppliers"},{default:o(()=>[...e[10]||(e[10]=[s("供应商库",-1)])]),_:1}),t(m,{index:"/policies"},{default:o(()=>[...e[11]||(e[11]=[s("政策法规",-1)])]),_:1}),t(m,{index:"/notices"},{default:o(()=>[...e[12]||(e[12]=[s("通知公告",-1)])]),_:1})]),_:1},8,["default-active"]),l("div",se,[d(i).isLoggedIn?(p(),v(E,{key:0,onCommand:B,trigger:"hover"},{dropdown:o(()=>[t(z,null,{default:o(()=>[t(g,{command:"profile"},{default:o(()=>[...e[13]||(e[13]=[s("个人中心",-1)])]),_:1}),t(g,{command:"favorites"},{default:o(()=>[...e[14]||(e[14]=[s("我的收藏",-1)])]),_:1}),d(i).isAdmin()?(p(),v(g,{key:0,command:"admin"},{default:o(()=>[...e[15]||(e[15]=[s("后台管理",-1)])]),_:1})):ee("",!0),t(g,{divided:"",command:"logout"},{default:o(()=>[...e[16]||(e[16]=[s("退出登录",-1)])]),_:1})]),_:1})]),default:o(()=>{var r,F,I;return[l("span",ae,[t($,{size:36,src:((r=d(i).userInfo)==null?void 0:r.avatar)||pe},null,8,["src"]),l("span",re,Z(((F=d(i).userInfo)==null?void 0:F.realName)||((I=d(i).userInfo)==null?void 0:I.username)),1),t(k,{class:"el-icon--right"},{default:o(()=>[t(d(h))]),_:1})])]}),_:1})):(p(),Y(oe,{key:1},[t(V,{type:"primary",plain:"",onClick:e[1]||(e[1]=r=>d(i).loginDialogVisible=!0)},{default:o(()=>[...e[17]||(e[17]=[s("登录",-1)])]),_:1}),t(V,{type:"warning",onClick:b},{default:o(()=>[...e[18]||(e[18]=[s("注册",-1)])]),_:1})],64))])])]),_:1}),t(S,{class:"main"},{default:o(()=>[t(R,null,{default:o(({Component:r})=>[t(te,{name:"fade",mode:"out-in"},{default:o(()=>[(p(),v(ne(r)))]),_:2},1024)]),_:1})]),_:1}),t(T,{class:"footer"},{default:o(()=>[l("div",ie,[e[22]||(e[22]=l("div",{class:"footer-section"},[l("h4",null,"关于我们"),l("p",null,"内部招标采购门户致力于提供公平、公正、公开的招标环境。")],-1)),e[23]||(e[23]=l("div",{class:"footer-section"},[l("h4",null,"联系方式"),l("p",null,"电话：021-12345678"),l("p",null,"邮箱：support@bidding.com")],-1)),l("div",de,[e[21]||(e[21]=l("h4",null,"快速链接",-1)),t(c,{href:"#",underline:!1},{default:o(()=>[...e[19]||(e[19]=[s("使用指南",-1)])]),_:1}),t(c,{href:"#",underline:!1},{default:o(()=>[...e[20]||(e[20]=[s("常见问题",-1)])]),_:1})])]),e[24]||(e[24]=l("div",{class:"copyright"}," Copyright © 2026 内部招标采购门户 版权所有 ",-1))]),_:1}),t(L,{modelValue:d(i).loginDialogVisible,"onUpdate:modelValue":e[6]||(e[6]=r=>d(i).loginDialogVisible=r),title:"用户登录",width:"400px",center:"","close-on-click-modal":!1,"destroy-on-close":""},{footer:o(()=>[t(V,{type:"primary",onClick:y,loading:w.value,style:{width:"100%"}},{default:o(()=>[...e[27]||(e[27]=[s("立即登录",-1)])]),_:1},8,["loading"]),l("div",me,[e[29]||(e[29]=s(" 还没有账号？",-1)),t(c,{type:"warning",onClick:e[5]||(e[5]=r=>{d(i).loginDialogVisible=!1,b()})},{default:o(()=>[...e[28]||(e[28]=[s("立即注册",-1)])]),_:1})])]),default:o(()=>[t(A,{model:u,"label-position":"top"},{default:o(()=>[t(D,{label:"用户名"},{default:o(()=>[t(C,{modelValue:u.username,"onUpdate:modelValue":e[2]||(e[2]=r=>u.username=r),placeholder:"请输入用户名",onKeyup:N(y,["enter"])},null,8,["modelValue"])]),_:1}),t(D,{label:"密码"},{default:o(()=>[t(C,{modelValue:u.password,"onUpdate:modelValue":e[3]||(e[3]=r=>u.password=r),type:"password","show-password":"",placeholder:"请输入密码",onKeyup:N(y,["enter"])},null,8,["modelValue"])]),_:1}),l("div",ue,[t(q,{modelValue:u.remember,"onUpdate:modelValue":e[4]||(e[4]=r=>u.remember=r)},{default:o(()=>[...e[25]||(e[25]=[s("记住登录",-1)])]),_:1},8,["modelValue"]),t(c,{type:"primary",underline:!1},{default:o(()=>[...e[26]||(e[26]=[s("忘记密码？",-1)])]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}},ce=j(fe,[["__scopeId","data-v-460de0c5"]]);export{ce as default};
