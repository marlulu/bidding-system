import{_ as q,r as z,h as x,i as G,j as J,k as i,o as c,w as n,e as t,u as K,d as e,b as s,l as h,m as _,t as b,g as C}from"./index-BfjmpUK-.js";import{u as L}from"./user-Dq3sK-8Q.js";import{g as P}from"./notice-CqPt9wmV.js";import"./request-CvP5yQdq.js";const Q={class:"header-left"},X={class:"page-title"},Y={class:"header-right"},Z={class:"user-info"},$={__name:"index",setup(ee){const m=G(),B=K(),r=L(),d=z(0),k=x(()=>{const l=m.path;return l.startsWith("/announcements")?"/announcements":l.startsWith("/suppliers")?"/suppliers":l.startsWith("/policies")?"/policies":l.startsWith("/notices")?"/notices":l.startsWith("/users")?"/users":l}),y=x(()=>m.meta.title||""),D=l=>{l==="logout"&&(r.logout(),B.push("/login"))},p=async()=>{try{d.value=await P()}catch(l){console.error("获取未读通知数量失败",l)}};return J(()=>{p(),setInterval(p,6e4)}),(l,o)=>{const N=t("HomeFilled"),a=t("el-icon"),u=t("el-menu-item"),U=t("Document"),W=t("OfficeBuilding"),F=t("Reading"),I=t("Bell"),R=t("el-badge"),f=t("User"),V=t("el-menu"),A=t("el-aside"),S=t("ArrowDown"),H=t("el-dropdown-item"),M=t("el-dropdown-menu"),O=t("el-dropdown"),T=t("el-header"),j=t("router-view"),E=t("el-main"),g=t("el-container");return c(),i(g,{class:"layout-container"},{default:n(()=>[e(A,{width:"200px",class:"sidebar"},{default:n(()=>[o[6]||(o[6]=s("div",{class:"logo"},[s("h2",null,"招标系统")],-1)),e(V,{"default-active":k.value,router:"","background-color":"#304156","text-color":"#bfcbd9","active-text-color":"#409EFF"},{default:n(()=>[e(u,{index:"/dashboard"},{default:n(()=>[e(a,null,{default:n(()=>[e(N)]),_:1}),o[0]||(o[0]=s("span",null,"首页",-1))]),_:1}),e(u,{index:"/announcements"},{default:n(()=>[e(a,null,{default:n(()=>[e(U)]),_:1}),o[1]||(o[1]=s("span",null,"招标公告",-1))]),_:1}),e(u,{index:"/suppliers"},{default:n(()=>[e(a,null,{default:n(()=>[e(W)]),_:1}),o[2]||(o[2]=s("span",null,"供应商管理",-1))]),_:1}),e(u,{index:"/policies"},{default:n(()=>[e(a,null,{default:n(()=>[e(F)]),_:1}),o[3]||(o[3]=s("span",null,"政策法规",-1))]),_:1}),e(u,{index:"/notices"},{default:n(()=>[e(a,null,{default:n(()=>[e(I)]),_:1}),o[4]||(o[4]=s("span",null,"系统通知",-1)),d.value>0?(c(),i(R,{key:0,value:d.value,class:"notice-badge"},null,8,["value"])):h("",!0)]),_:1}),_(r).isAdmin()?(c(),i(u,{key:0,index:"/users"},{default:n(()=>[e(a,null,{default:n(()=>[e(f)]),_:1}),o[5]||(o[5]=s("span",null,"用户管理",-1))]),_:1})):h("",!0)]),_:1},8,["default-active"])]),_:1}),e(g,null,{default:n(()=>[e(T,{class:"header"},{default:n(()=>[s("div",Q,[s("span",X,b(y.value),1)]),s("div",Y,[e(O,{onCommand:D},{dropdown:n(()=>[e(M,null,{default:n(()=>[e(H,{command:"logout"},{default:n(()=>[...o[7]||(o[7]=[C("退出登录",-1)])]),_:1})]),_:1})]),default:n(()=>{var v,w;return[s("span",Z,[e(a,null,{default:n(()=>[e(f)]),_:1}),C(" "+b(((v=_(r).userInfo)==null?void 0:v.realName)||((w=_(r).userInfo)==null?void 0:w.username))+" ",1),e(a,{class:"el-icon--right"},{default:n(()=>[e(S)]),_:1})])]}),_:1})])]),_:1}),e(E,{class:"main-content"},{default:n(()=>[e(j)]),_:1})]),_:1})]),_:1})}}},le=q($,[["__scopeId","data-v-8e8c6c17"]]);export{le as default};
