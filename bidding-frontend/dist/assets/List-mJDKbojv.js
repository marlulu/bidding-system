import{_ as O,u as Q,r as D,b as M,a as W,s as X,k as m,o as d,h as i,g as e,D as Y,w as a,e as s,G as Z,d as h,m as S,f as ee,F as U,v as E,j as u,t as p,i as f,H as te,C as le,I as ae,E as oe}from"./index-C0_KmiTV.js";import{g as se}from"./supplier-wivRDoUp.js";const ne={class:"supplier-list container"},ie={class:"filter-section"},re={class:"tag-cloud"},de={class:"supplier-logo"},ce={class:"name"},ue={class:"industry"},pe={class:"tags"},_e={class:"card-footer"},me={class:"pagination"},fe={__name:"List",setup(ve){const C=ee(),N=W(),$=Q(),v=D(!1),y=D([]),q=["全部","信息技术","建筑工程","医疗器械","办公用品","咨询服务","物流运输"],n=M({industry:N.query.industry||"",scale:"",qualificationLevel:"",keyword:""}),r=M({page:1,size:12,total:0}),g=async()=>{v.value=!0;try{const o={...n};o.industry==="全部"&&(o.industry="");const t=await se({page:r.page,size:r.size,...o});y.value=t.records,r.total=t.total}catch(o){console.error("加载供应商列表失败",o)}finally{v.value=!1}},w=()=>{r.page=1,g()},A=o=>{n.industry=o,w()},I=o=>{C.push(`/suppliers/detail/${o}`)},B=o=>{oe.success(`已向 ${o.companyName} 发送联系请求，请等待回复。`)},R=o=>({LARGE:"大型企业",MEDIUM:"中型企业",SMALL:"小型企业"})[o]||o;return X(()=>{g()}),(o,t)=>{const k=s("el-tag"),F=s("el-divider"),c=s("el-option"),L=s("el-select"),_=s("el-form-item"),V=s("el-icon"),b=s("el-button"),G=s("el-input"),j=s("el-form"),z=s("el-card"),H=s("el-col"),P=s("el-row"),T=s("el-empty"),J=s("el-pagination"),K=Z("loading");return d(),m("div",ne,[t[9]||(t[9]=i("h1",{class:"page-title"},"优质供应商库",-1)),e(z,{class:"filter-card",shadow:"never"},{default:a(()=>[i("div",ie,[t[6]||(t[6]=i("span",{class:"label"},"行业分类：",-1)),i("div",re,[(d(),m(U,null,E(q,l=>e(k,{key:l,effect:n.industry===l?"dark":"plain",class:"filter-tag",onClick:x=>A(l)},{default:a(()=>[u(p(l),1)]),_:2},1032,["effect","onClick"])),64))])]),e(F,{"border-style":"dashed"}),e(j,{inline:!0,model:n},{default:a(()=>[e(_,{label:"企业规模"},{default:a(()=>[e(L,{modelValue:n.scale,"onUpdate:modelValue":t[0]||(t[0]=l=>n.scale=l),placeholder:"全部规模",clearable:"",style:{width:"150px"}},{default:a(()=>[e(c,{label:"大型企业",value:"LARGE"}),e(c,{label:"中型企业",value:"MEDIUM"}),e(c,{label:"小型企业",value:"SMALL"})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"资质等级"},{default:a(()=>[e(L,{modelValue:n.qualificationLevel,"onUpdate:modelValue":t[1]||(t[1]=l=>n.qualificationLevel=l),placeholder:"全部等级",clearable:"",style:{width:"150px"}},{default:a(()=>[e(c,{label:"一级资质",value:"一级资质"}),e(c,{label:"二级资质",value:"二级资质"}),e(c,{label:"三级资质",value:"三级资质"})]),_:1},8,["modelValue"])]),_:1}),e(_,null,{default:a(()=>[e(G,{modelValue:n.keyword,"onUpdate:modelValue":t[2]||(t[2]=l=>n.keyword=l),placeholder:"搜索供应商名称",clearable:"",style:{width:"250px"}},{append:a(()=>[e(b,{onClick:w},{default:a(()=>[e(V,null,{default:a(()=>[e(f(te))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),f($).isAdmin()?(d(),h(_,{key:0},{default:a(()=>[e(b,{type:"success",onClick:t[3]||(t[3]=l=>f(C).push("/suppliers/create"))},{default:a(()=>[...t[7]||(t[7]=[u("新增供应商",-1)])]),_:1})]),_:1})):S("",!0)]),_:1},8,["model"])]),_:1}),Y((d(),m("div",null,[e(P,{gutter:20},{default:a(()=>[(d(!0),m(U,null,E(y.value,l=>(d(),h(H,{xs:24,sm:12,md:6,key:l.id},{default:a(()=>[e(z,{class:"card-item supplier-card",shadow:"hover",onClick:x=>I(l.id)},{default:a(()=>[i("div",de,[e(V,{size:40,color:"#003366"},{default:a(()=>[e(f(le))]),_:1})]),i("h3",ce,p(l.companyName),1),i("p",ue,p(l.industry),1),i("div",pe,[e(k,{size:"small",type:"info"},{default:a(()=>[u(p(R(l.scale)),1)]),_:2},1024),e(k,{size:"small",type:"success",style:{"margin-left":"5px"}},{default:a(()=>[u(p(l.qualificationLevel||"认证供应商"),1)]),_:2},1024)]),i("div",_e,[e(b,{type:"primary",plain:"",size:"small",onClick:ae(x=>B(l),["stop"])},{default:a(()=>[...t[8]||(t[8]=[u("联系供应商",-1)])]),_:1},8,["onClick"])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),y.value.length===0?(d(),h(T,{key:0,description:"暂无相关供应商信息"})):S("",!0),i("div",me,[e(J,{"current-page":r.page,"onUpdate:currentPage":t[4]||(t[4]=l=>r.page=l),"page-size":r.size,"onUpdate:pageSize":t[5]||(t[5]=l=>r.size=l),total:r.total,layout:"total, prev, pager, next, jumper",onCurrentChange:g},null,8,["current-page","page-size","total"])])])),[[K,v.value]])])}}},ke=O(fe,[["__scopeId","data-v-6b6a1bed"]]);export{ke as default};
