import{g as G,b as K}from"./supplier-Brz4Qjp8.js";import{_ as R,r as p,s as q,k as x,o as g,g as t,w as a,e as u,E as V,G as H,D as J,h as N,d as O,j as l,t as i,m as $,F as P,K as Q}from"./index-Dg0MfX17.js";const W={class:"supplier-audit-container"},X={class:"card-header"},Y={class:"pagination"},Z={__name:"Audit",setup(h){const b=p(!1),S=p([]),B=p(0),y=p(1),k=p(10),C=p(""),v=p(!1),n=p({}),_=async()=>{b.value=!0;try{const s=await G({page:y.value,size:k.value,status:C.value});S.value=s.records,B.value=s.total}catch{V.error("加载数据失败")}finally{b.value=!1}},z=s=>({0:"warning",1:"success",2:"danger"})[s]||"info",E=s=>({0:"待审核",1:"已认证",2:"已拒绝"})[s]||"未知",T=s=>{n.value=s,v.value=!0},f=(s,e)=>{const c=e===1?"通过":"拒绝";Q.prompt("请输入审核意见","审核确认",{confirmButtonText:"确定",cancelButtonText:"取消",inputPlaceholder:e===1?"准予入驻":"资料不全，请重新提交",type:e===1?"success":"warning"}).then(async({value:w})=>{try{await K(s.id,{status:e,auditRemark:w||(e===1?"准予入驻":"审核未通过")}),V.success(`已${c}`),v.value=!1,_()}catch{V.error("操作失败")}})};return q(_),(s,e)=>{const c=u("el-radio-button"),w=u("el-radio-group"),d=u("el-table-column"),U=u("el-tag"),m=u("el-button"),A=u("el-table"),M=u("el-pagination"),F=u("el-card"),r=u("el-descriptions-item"),I=u("el-descriptions"),L=u("el-dialog"),j=H("loading");return g(),x("div",W,[t(F,null,{header:a(()=>[N("div",X,[e[11]||(e[11]=N("span",{class:"title"},"供应商入驻审核",-1)),t(w,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=o=>C.value=o),onChange:_},{default:a(()=>[t(c,{label:""},{default:a(()=>[...e[7]||(e[7]=[l("全部",-1)])]),_:1}),t(c,{label:0},{default:a(()=>[...e[8]||(e[8]=[l("待审核",-1)])]),_:1}),t(c,{label:1},{default:a(()=>[...e[9]||(e[9]=[l("已认证",-1)])]),_:1}),t(c,{label:2},{default:a(()=>[...e[10]||(e[10]=[l("已拒绝",-1)])]),_:1})]),_:1},8,["modelValue"])])]),default:a(()=>[J((g(),O(A,{data:S.value,style:{width:"100%"}},{default:a(()=>[t(d,{prop:"companyName",label:"公司名称","min-width":"200","show-overflow-tooltip":""}),t(d,{prop:"industry",label:"行业",width:"120"}),t(d,{prop:"contactName",label:"联系人",width:"120"}),t(d,{prop:"contactPhone",label:"联系电话",width:"150"}),t(d,{prop:"createTime",label:"申请时间",width:"180"}),t(d,{prop:"status",label:"状态",width:"100"},{default:a(({row:o})=>[t(U,{type:z(o.status)},{default:a(()=>[l(i(E(o.status)),1)]),_:2},1032,["type"])]),_:1}),t(d,{label:"操作",width:"200",fixed:"right"},{default:a(({row:o})=>[t(m,{link:"",type:"primary",onClick:D=>T(o)},{default:a(()=>[...e[12]||(e[12]=[l("详情",-1)])]),_:1},8,["onClick"]),o.status===0?(g(),x(P,{key:0},[t(m,{link:"",type:"success",onClick:D=>f(o,1)},{default:a(()=>[...e[13]||(e[13]=[l("通过",-1)])]),_:1},8,["onClick"]),t(m,{link:"",type:"danger",onClick:D=>f(o,2)},{default:a(()=>[...e[14]||(e[14]=[l("拒绝",-1)])]),_:1},8,["onClick"])],64)):$("",!0)]),_:1})]),_:1},8,["data"])),[[j,b.value]]),N("div",Y,[t(M,{"current-page":y.value,"onUpdate:currentPage":e[1]||(e[1]=o=>y.value=o),"page-size":k.value,"onUpdate:pageSize":e[2]||(e[2]=o=>k.value=o),total:B.value,layout:"total, prev, pager, next",onCurrentChange:_},null,8,["current-page","page-size","total"])])]),_:1}),t(L,{modelValue:v.value,"onUpdate:modelValue":e[6]||(e[6]=o=>v.value=o),title:"供应商申请详情",width:"700px"},{footer:a(()=>[t(m,{onClick:e[3]||(e[3]=o=>v.value=!1)},{default:a(()=>[...e[15]||(e[15]=[l("关闭",-1)])]),_:1}),n.value.status===0?(g(),x(P,{key:0},[t(m,{type:"success",onClick:e[4]||(e[4]=o=>f(n.value,1))},{default:a(()=>[...e[16]||(e[16]=[l("审核通过",-1)])]),_:1}),t(m,{type:"danger",onClick:e[5]||(e[5]=o=>f(n.value,2))},{default:a(()=>[...e[17]||(e[17]=[l("拒绝申请",-1)])]),_:1})],64)):$("",!0)]),default:a(()=>[t(I,{column:2,border:""},{default:a(()=>[t(r,{label:"公司名称",span:2},{default:a(()=>[l(i(n.value.companyName),1)]),_:1}),t(r,{label:"信用代码"},{default:a(()=>[l(i(n.value.companyCode),1)]),_:1}),t(r,{label:"行业"},{default:a(()=>[l(i(n.value.industry),1)]),_:1}),t(r,{label:"法人代表"},{default:a(()=>[l(i(n.value.legalPerson),1)]),_:1}),t(r,{label:"企业规模"},{default:a(()=>[l(i(n.value.scale),1)]),_:1}),t(r,{label:"联系人"},{default:a(()=>[l(i(n.value.contactName),1)]),_:1}),t(r,{label:"联系电话"},{default:a(()=>[l(i(n.value.contactPhone),1)]),_:1}),t(r,{label:"联系邮箱",span:2},{default:a(()=>[l(i(n.value.contactEmail),1)]),_:1}),t(r,{label:"公司地址",span:2},{default:a(()=>[l(i(n.value.address),1)]),_:1}),t(r,{label:"公司简介",span:2},{default:a(()=>[l(i(n.value.description),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},ae=R(Z,[["__scopeId","data-v-13d41985"]]);export{ae as default};
