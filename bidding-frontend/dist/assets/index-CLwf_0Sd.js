import{_ as G,c as H,u as J,r as U,a as O,w as P,o as Q,b as w,d as v,e as o,f as n,g as X,h as t,i as l,j as u,p as Y,k as s,l as Z,t as h,m as ee,n as oe,F as te,T as ne,q as le,s as $,E as y}from"./index-DCFAUsYj.js";import{u as se}from"./user-D1_W61zT.js";import"./request--6APTGSy.js";const ae={class:"header-content"},re={class:"user-info"},ie={class:"el-dropdown-link"},ue={class:"username"},de={class:"footer-content"},me={class:"footer-section"},pe={class:"login-options"},fe={style:{"margin-top":"15px","text-align":"center"}},_e="https://api.dicebear.com/7.x/avataaars/svg?seed=default",ve={__name:"index",setup(ge){const f=J(),d=X(),m=se(),B=H(()=>{const a=f.path;return a==="/"?"/":a.startsWith("/announcements")?"/announcements":a.startsWith("/suppliers")?"/suppliers":a.startsWith("/policies")?"/policies":a.startsWith("/notices")?"/notices":a}),p=U(!1),x=U(!1),i=O({username:"",password:"",remember:!1});P(()=>f.path,a=>{a==="/login"&&f.query.redirect&&(p.value=!0)},{immediate:!0});const k=async()=>{if(!i.username||!i.password)return y.warning("请输入用户名和密码");x.value=!0;try{await m.login(i),y.success("登录成功"),p.value=!1;const a=f.query.redirect;a?d.push(a):f.path==="/login"&&d.push("/")}catch(a){y.error(a.message||"登录失败")}finally{x.value=!1}},W=a=>{a==="logout"?(m.logout(),d.push("/"),y.success("已退出登录")):d.push(`/${a}`)};return Q(()=>{f.path==="/login"&&(p.value=!0)}),(a,e)=>{const b=n("el-icon"),_=n("el-menu-item"),q=n("el-menu"),z=n("el-avatar"),g=n("el-dropdown-item"),D=n("el-dropdown-menu"),E=n("el-dropdown"),V=n("el-button"),K=n("el-header"),L=n("router-view"),M=n("el-main"),c=n("el-link"),S=n("el-footer"),C=n("el-input"),F=n("el-form-item"),T=n("el-checkbox"),A=n("el-form"),R=n("el-dialog"),j=n("el-container");return v(),w(j,{class:"layout-container"},{default:o(()=>[t(K,{class:"header"},{default:o(()=>[l("div",ae,[l("div",{class:"logo",onClick:e[0]||(e[0]=r=>u(d).push("/"))},[t(b,{size:30,color:"#fff"},{default:o(()=>[t(u(Y))]),_:1}),e[8]||(e[8]=l("span",null,"内部招标采购门户",-1))]),t(q,{mode:"horizontal","default-active":B.value,"background-color":"#003366","text-color":"#fff","active-text-color":"#FF6600",router:"",class:"nav-menu"},{default:o(()=>[t(_,{index:"/"},{default:o(()=>[...e[9]||(e[9]=[s("首页",-1)])]),_:1}),t(_,{index:"/announcements"},{default:o(()=>[...e[10]||(e[10]=[s("招标信息",-1)])]),_:1}),t(_,{index:"/suppliers"},{default:o(()=>[...e[11]||(e[11]=[s("供应商库",-1)])]),_:1}),t(_,{index:"/policies"},{default:o(()=>[...e[12]||(e[12]=[s("政策法规",-1)])]),_:1}),t(_,{index:"/notices"},{default:o(()=>[...e[13]||(e[13]=[s("通知公告",-1)])]),_:1})]),_:1},8,["default-active"]),l("div",re,[u(m).isLoggedIn?(v(),w(E,{key:0,onCommand:W,trigger:"hover"},{dropdown:o(()=>[t(D,null,{default:o(()=>[t(g,{command:"profile"},{default:o(()=>[...e[14]||(e[14]=[s("个人中心",-1)])]),_:1}),t(g,{command:"favorites"},{default:o(()=>[...e[15]||(e[15]=[s("我的收藏",-1)])]),_:1}),u(m).isAdmin()?(v(),w(g,{key:0,command:"admin"},{default:o(()=>[...e[16]||(e[16]=[s("后台管理",-1)])]),_:1})):oe("",!0),t(g,{divided:"",command:"logout"},{default:o(()=>[...e[17]||(e[17]=[s("退出登录",-1)])]),_:1})]),_:1})]),default:o(()=>{var r,I,N;return[l("span",ie,[t(z,{size:36,src:((r=u(m).userInfo)==null?void 0:r.avatar)||_e},null,8,["src"]),l("span",ue,h(((I=u(m).userInfo)==null?void 0:I.realName)||((N=u(m).userInfo)==null?void 0:N.username)),1),t(b,{class:"el-icon--right"},{default:o(()=>[t(u(ee))]),_:1})])]}),_:1})):(v(),Z(te,{key:1},[t(V,{type:"primary",plain:"",onClick:e[1]||(e[1]=r=>p.value=!0)},{default:o(()=>[...e[18]||(e[18]=[s("登录",-1)])]),_:1}),t(V,{type:"warning",onClick:e[2]||(e[2]=r=>u(d).push("/register"))},{default:o(()=>[...e[19]||(e[19]=[s("注册",-1)])]),_:1})],64))])])]),_:1}),t(M,{class:"main"},{default:o(()=>[t(L,null,{default:o(({Component:r})=>[t(ne,{name:"fade",mode:"out-in"},{default:o(()=>[(v(),w(le(r)))]),_:2},1024)]),_:1})]),_:1}),t(S,{class:"footer"},{default:o(()=>[l("div",de,[e[23]||(e[23]=l("div",{class:"footer-section"},[l("h4",null,"关于我们"),l("p",null,"内部招标采购门户致力于提供公平、公正、公开的招标环境。")],-1)),e[24]||(e[24]=l("div",{class:"footer-section"},[l("h4",null,"联系方式"),l("p",null,"电话：021-12345678"),l("p",null,"邮箱：support@bidding.com")],-1)),l("div",me,[e[22]||(e[22]=l("h4",null,"快速链接",-1)),t(c,{href:"#",underline:!1},{default:o(()=>[...e[20]||(e[20]=[s("使用指南",-1)])]),_:1}),t(c,{href:"#",underline:!1},{default:o(()=>[...e[21]||(e[21]=[s("常见问题",-1)])]),_:1})])]),e[25]||(e[25]=l("div",{class:"copyright"}," Copyright © 2026 内部招标采购门户 版权所有 ",-1))]),_:1}),t(R,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=r=>p.value=r),title:"用户登录",width:"400px",center:"","close-on-click-modal":!1},{footer:o(()=>[t(V,{type:"primary",onClick:k,loading:x.value,style:{width:"100%"}},{default:o(()=>[...e[28]||(e[28]=[s("立即登录",-1)])]),_:1},8,["loading"]),l("div",fe,[e[30]||(e[30]=s(" 还没有账号？",-1)),t(c,{type:"warning",onClick:e[6]||(e[6]=r=>{p.value=!1,u(d).push("/register")})},{default:o(()=>[...e[29]||(e[29]=[s("立即注册",-1)])]),_:1})])]),default:o(()=>[t(A,{model:i,"label-position":"top"},{default:o(()=>[t(F,{label:"用户名"},{default:o(()=>[t(C,{modelValue:i.username,"onUpdate:modelValue":e[3]||(e[3]=r=>i.username=r),placeholder:"请输入用户名",onKeyup:$(k,["enter"])},null,8,["modelValue"])]),_:1}),t(F,{label:"密码"},{default:o(()=>[t(C,{modelValue:i.password,"onUpdate:modelValue":e[4]||(e[4]=r=>i.password=r),type:"password","show-password":"",placeholder:"请输入密码",onKeyup:$(k,["enter"])},null,8,["modelValue"])]),_:1}),l("div",pe,[t(T,{modelValue:i.remember,"onUpdate:modelValue":e[5]||(e[5]=r=>i.remember=r)},{default:o(()=>[...e[26]||(e[26]=[s("记住登录",-1)])]),_:1},8,["modelValue"]),t(c,{type:"primary",underline:!1},{default:o(()=>[...e[27]||(e[27]=[s("忘记密码？",-1)])]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}},xe=G(ve,[["__scopeId","data-v-3365a206"]]);export{xe as default};
