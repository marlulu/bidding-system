import{_ as O,u as P,c as G,a as H,r as J,b as Q,d as g,o as m,w as o,e as n,f as X,g as t,h as l,i,p as Y,j as s,k as Z,t as h,l as ee,m as F,F as oe,T as te,n as ne,q as I,E as w}from"./index-Dg0MfX17.js";const le={class:"header-content"},se={class:"user-info"},re={class:"el-dropdown-link"},ae={class:"username"},ie={class:"footer-content"},de={class:"footer-section"},ue={class:"login-options"},pe={style:{"margin-top":"15px","text-align":"center"}},me="https://api.dicebear.com/7.x/avataaars/svg?seed=default",fe={__name:"index",setup(_e){const k=H(),p=X(),d=P(),N=G(()=>{const r=k.path;return r==="/"?"/":r.startsWith("/announcements")?"/announcements":r.startsWith("/suppliers")?"/suppliers":r.startsWith("/policies")?"/policies":r.startsWith("/notices")?"/notices":r}),y=J(!1),u=Q({username:"",password:"",remember:!1}),b=async()=>{if(!u.username||!u.password)return w.warning("请输入用户名和密码");y.value=!0;try{await d.login(u),w.success("登录成功"),d.loginDialogVisible=!1;const r=k.query.redirect;r&&p.push(r)}catch(r){w.error(r.message||"登录失败")}finally{y.value=!1}},x=()=>{p.push("/register")},q=r=>{if(r==="logout")d.logout(),p.push("/"),w.success("已退出登录");else if(r.includes("?")){const[e,v]=r.split("?");p.push({path:`/${e}`,query:Object.fromEntries(new URLSearchParams(v))})}else p.push(`/${r}`)};return(r,e)=>{const v=n("el-icon"),f=n("el-menu-item"),B=n("el-menu"),E=n("el-avatar"),_=n("el-dropdown-item"),R=n("el-dropdown-menu"),S=n("el-dropdown"),V=n("el-button"),W=n("el-header"),z=n("router-view"),A=n("el-main"),c=n("el-link"),K=n("el-footer"),C=n("el-input"),D=n("el-form-item"),L=n("el-checkbox"),T=n("el-form"),j=n("el-dialog"),M=n("el-container");return m(),g(M,{class:"layout-container"},{default:o(()=>[t(W,{class:"header"},{default:o(()=>[l("div",le,[l("div",{class:"logo",onClick:e[0]||(e[0]=a=>i(p).push("/"))},[t(v,{size:30,color:"#fff"},{default:o(()=>[t(i(Y))]),_:1}),e[8]||(e[8]=l("span",null,"内部招标采购门户",-1))]),t(B,{mode:"horizontal","default-active":N.value,"background-color":"#003366","text-color":"#fff","active-text-color":"#FF6600",router:"",class:"nav-menu"},{default:o(()=>[t(f,{index:"/"},{default:o(()=>[...e[9]||(e[9]=[s("首页",-1)])]),_:1}),t(f,{index:"/announcements"},{default:o(()=>[...e[10]||(e[10]=[s("招标信息",-1)])]),_:1}),t(f,{index:"/suppliers"},{default:o(()=>[...e[11]||(e[11]=[s("供应商库",-1)])]),_:1}),t(f,{index:"/policies"},{default:o(()=>[...e[12]||(e[12]=[s("政策法规",-1)])]),_:1}),t(f,{index:"/notices"},{default:o(()=>[...e[13]||(e[13]=[s("通知公告",-1)])]),_:1})]),_:1},8,["default-active"]),l("div",se,[i(d).isLoggedIn?(m(),g(S,{key:0,onCommand:q,trigger:"hover"},{dropdown:o(()=>[t(R,null,{default:o(()=>[t(_,{command:"profile"},{default:o(()=>[...e[14]||(e[14]=[s("个人中心",-1)])]),_:1}),t(_,{command:"profile?tab=favorites"},{default:o(()=>[...e[15]||(e[15]=[s("我的收藏",-1)])]),_:1}),i(d).isAdmin()?(m(),g(_,{key:0,command:"users"},{default:o(()=>[...e[16]||(e[16]=[s("后台管理",-1)])]),_:1})):F("",!0),i(d).isAdmin()?(m(),g(_,{key:1,command:"experts"},{default:o(()=>[...e[17]||(e[17]=[s("专家库管理",-1)])]),_:1})):F("",!0),t(_,{divided:"",command:"logout"},{default:o(()=>[...e[18]||(e[18]=[s("退出登录",-1)])]),_:1})]),_:1})]),default:o(()=>{var a,U,$;return[l("span",re,[t(E,{size:36,src:((a=i(d).userInfo)==null?void 0:a.avatar)||me},null,8,["src"]),l("span",ae,h(((U=i(d).userInfo)==null?void 0:U.realName)||(($=i(d).userInfo)==null?void 0:$.username)),1),t(v,{class:"el-icon--right"},{default:o(()=>[t(i(ee))]),_:1})])]}),_:1})):(m(),Z(oe,{key:1},[t(V,{type:"primary",plain:"",onClick:e[1]||(e[1]=a=>i(d).loginDialogVisible=!0)},{default:o(()=>[...e[19]||(e[19]=[s("登录",-1)])]),_:1}),t(V,{type:"warning",onClick:x},{default:o(()=>[...e[20]||(e[20]=[s("注册",-1)])]),_:1})],64))])])]),_:1}),t(A,{class:"main"},{default:o(()=>[t(z,null,{default:o(({Component:a})=>[t(te,{name:"fade",mode:"out-in"},{default:o(()=>[(m(),g(ne(a)))]),_:2},1024)]),_:1})]),_:1}),t(K,{class:"footer"},{default:o(()=>[l("div",ie,[e[24]||(e[24]=l("div",{class:"footer-section"},[l("h4",null,"关于我们"),l("p",null,"内部招标采购门户致力于提供公平、公正、公开的招标环境。")],-1)),e[25]||(e[25]=l("div",{class:"footer-section"},[l("h4",null,"联系方式"),l("p",null,"电话：021-12345678"),l("p",null,"邮箱：support@bidding.com")],-1)),l("div",de,[e[23]||(e[23]=l("h4",null,"快速链接",-1)),t(c,{href:"#",underline:!1},{default:o(()=>[...e[21]||(e[21]=[s("使用指南",-1)])]),_:1}),t(c,{href:"#",underline:!1},{default:o(()=>[...e[22]||(e[22]=[s("常见问题",-1)])]),_:1})])]),e[26]||(e[26]=l("div",{class:"copyright"}," Copyright © 2026 内部招标采购门户 版权所有 ",-1))]),_:1}),t(j,{modelValue:i(d).loginDialogVisible,"onUpdate:modelValue":e[7]||(e[7]=a=>i(d).loginDialogVisible=a),title:"用户登录",width:"400px",center:"","close-on-click-modal":!1,"destroy-on-close":""},{footer:o(()=>[t(V,{type:"primary",onClick:b,loading:y.value,style:{width:"100%"}},{default:o(()=>[...e[29]||(e[29]=[s("立即登录",-1)])]),_:1},8,["loading"]),l("div",pe,[e[31]||(e[31]=s(" 还没有账号？",-1)),t(c,{type:"warning",onClick:e[6]||(e[6]=a=>{i(d).loginDialogVisible=!1,x()})},{default:o(()=>[...e[30]||(e[30]=[s("立即注册",-1)])]),_:1})])]),default:o(()=>[t(T,{model:u,"label-position":"top"},{default:o(()=>[t(D,{label:"用户名"},{default:o(()=>[t(C,{modelValue:u.username,"onUpdate:modelValue":e[2]||(e[2]=a=>u.username=a),placeholder:"请输入用户名",onKeyup:I(b,["enter"])},null,8,["modelValue"])]),_:1}),t(D,{label:"密码"},{default:o(()=>[t(C,{modelValue:u.password,"onUpdate:modelValue":e[3]||(e[3]=a=>u.password=a),type:"password","show-password":"",placeholder:"请输入密码",onKeyup:I(b,["enter"])},null,8,["modelValue"])]),_:1}),l("div",ue,[t(L,{modelValue:u.remember,"onUpdate:modelValue":e[4]||(e[4]=a=>u.remember=a)},{default:o(()=>[...e[27]||(e[27]=[s("记住登录",-1)])]),_:1},8,["modelValue"]),t(c,{type:"primary",underline:!1,onClick:e[5]||(e[5]=a=>{i(d).loginDialogVisible=!1,i(p).push("/reset-password")})},{default:o(()=>[...e[28]||(e[28]=[s("忘记密码？",-1)])]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}},ve=O(fe,[["__scopeId","data-v-b3707174"]]);export{ve as default};
