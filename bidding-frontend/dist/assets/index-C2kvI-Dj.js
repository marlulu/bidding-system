import{_ as G,h as H,i as J,r as $,a as O,j as P,k as Q,l as w,o as v,w as o,e as n,u as X,d as t,b as l,m as u,p as Y,g as s,c as Z,t as h,n as ee,q as oe,F as te,T as ne,s as le,f as B,E as y}from"./index-8BbQxS2W.js";import{u as se}from"./user-CoC7bmMY.js";import"./request-BHOxzfOV.js";const re={class:"header-content"},ae={class:"user-info"},ie={class:"el-dropdown-link"},ue={class:"username"},de={class:"footer-content"},me={class:"footer-section"},pe={class:"login-options"},fe={style:{"margin-top":"15px","text-align":"center"}},_e={__name:"index",setup(ve){const f=J(),d=X(),m=se(),I=H(()=>{const r=f.path;return r==="/"?"/":r.startsWith("/announcements")?"/announcements":r.startsWith("/suppliers")?"/suppliers":r.startsWith("/policies")?"/policies":r.startsWith("/notices")?"/notices":r}),p=$(!1),k=$(!1),i=O({username:"",password:"",remember:!1});P(()=>f.path,r=>{r==="/login"&&f.query.redirect&&(p.value=!0)},{immediate:!0});const x=async()=>{if(!i.username||!i.password)return y.warning("请输入用户名和密码");k.value=!0;try{await m.login(i),y.success("登录成功"),p.value=!1;const r=f.query.redirect;r?d.push(r):f.path==="/login"&&d.push("/")}catch(r){y.error(r.message||"登录失败")}finally{k.value=!1}},W=r=>{r==="logout"?(m.logout(),d.push("/"),y.success("已退出登录")):d.push(`/${r}`)};return Q(()=>{f.path==="/login"&&(p.value=!0)}),(r,e)=>{const b=n("el-icon"),_=n("el-menu-item"),q=n("el-menu"),z=n("el-avatar"),g=n("el-dropdown-item"),D=n("el-dropdown-menu"),E=n("el-dropdown"),V=n("el-button"),K=n("el-header"),L=n("router-view"),M=n("el-main"),c=n("el-link"),S=n("el-footer"),C=n("el-input"),F=n("el-form-item"),T=n("el-checkbox"),R=n("el-form"),j=n("el-dialog"),A=n("el-container");return v(),w(A,{class:"layout-container"},{default:o(()=>[t(K,{class:"header"},{default:o(()=>[l("div",re,[l("div",{class:"logo",onClick:e[0]||(e[0]=a=>u(d).push("/"))},[t(b,{size:30,color:"#fff"},{default:o(()=>[t(u(Y))]),_:1}),e[8]||(e[8]=l("span",null,"内部招标采购门户",-1))]),t(q,{mode:"horizontal","default-active":I.value,"background-color":"#003366","text-color":"#fff","active-text-color":"#FF6600",router:"",class:"nav-menu"},{default:o(()=>[t(_,{index:"/"},{default:o(()=>[...e[9]||(e[9]=[s("首页",-1)])]),_:1}),t(_,{index:"/announcements"},{default:o(()=>[...e[10]||(e[10]=[s("招标信息",-1)])]),_:1}),t(_,{index:"/suppliers"},{default:o(()=>[...e[11]||(e[11]=[s("供应商库",-1)])]),_:1}),t(_,{index:"/policies"},{default:o(()=>[...e[12]||(e[12]=[s("政策法规",-1)])]),_:1}),t(_,{index:"/notices"},{default:o(()=>[...e[13]||(e[13]=[s("通知公告",-1)])]),_:1})]),_:1},8,["default-active"]),l("div",ae,[u(m).isLogin?(v(),w(E,{key:0,onCommand:W},{dropdown:o(()=>[t(D,null,{default:o(()=>[t(g,{command:"profile"},{default:o(()=>[...e[14]||(e[14]=[s("个人中心",-1)])]),_:1}),t(g,{command:"favorites"},{default:o(()=>[...e[15]||(e[15]=[s("我的收藏",-1)])]),_:1}),u(m).isAdmin()?(v(),w(g,{key:0,command:"admin"},{default:o(()=>[...e[16]||(e[16]=[s("后台管理",-1)])]),_:1})):oe("",!0),t(g,{divided:"",command:"logout"},{default:o(()=>[...e[17]||(e[17]=[s("退出登录",-1)])]),_:1})]),_:1})]),default:o(()=>{var a,N,U;return[l("span",ie,[t(z,{size:32,src:(a=u(m).userInfo)==null?void 0:a.avatar},null,8,["src"]),l("span",ue,h(((N=u(m).userInfo)==null?void 0:N.realName)||((U=u(m).userInfo)==null?void 0:U.username)),1),t(b,{class:"el-icon--right"},{default:o(()=>[t(u(ee))]),_:1})])]}),_:1})):(v(),Z(te,{key:1},[t(V,{type:"primary",plain:"",onClick:e[1]||(e[1]=a=>p.value=!0)},{default:o(()=>[...e[18]||(e[18]=[s("登录",-1)])]),_:1}),t(V,{type:"warning",onClick:e[2]||(e[2]=a=>u(d).push("/register"))},{default:o(()=>[...e[19]||(e[19]=[s("注册",-1)])]),_:1})],64))])])]),_:1}),t(M,{class:"main"},{default:o(()=>[t(L,null,{default:o(({Component:a})=>[t(ne,{name:"fade",mode:"out-in"},{default:o(()=>[(v(),w(le(a)))]),_:2},1024)]),_:1})]),_:1}),t(S,{class:"footer"},{default:o(()=>[l("div",de,[e[23]||(e[23]=l("div",{class:"footer-section"},[l("h4",null,"关于我们"),l("p",null,"内部招标采购门户致力于提供公平、公正、公开的招标环境。")],-1)),e[24]||(e[24]=l("div",{class:"footer-section"},[l("h4",null,"联系方式"),l("p",null,"电话：021-12345678"),l("p",null,"邮箱：support@bidding.com")],-1)),l("div",me,[e[22]||(e[22]=l("h4",null,"快速链接",-1)),t(c,{href:"#",underline:!1},{default:o(()=>[...e[20]||(e[20]=[s("使用指南",-1)])]),_:1}),t(c,{href:"#",underline:!1},{default:o(()=>[...e[21]||(e[21]=[s("常见问题",-1)])]),_:1})])]),e[25]||(e[25]=l("div",{class:"copyright"}," Copyright © 2026 内部招标采购门户 版权所有 ",-1))]),_:1}),t(j,{modelValue:p.value,"onUpdate:modelValue":e[7]||(e[7]=a=>p.value=a),title:"用户登录",width:"400px",center:"","close-on-click-modal":!1},{footer:o(()=>[t(V,{type:"primary",onClick:x,loading:k.value,style:{width:"100%"}},{default:o(()=>[...e[28]||(e[28]=[s("立即登录",-1)])]),_:1},8,["loading"]),l("div",fe,[e[30]||(e[30]=s(" 还没有账号？",-1)),t(c,{type:"warning",onClick:e[6]||(e[6]=a=>{p.value=!1,u(d).push("/register")})},{default:o(()=>[...e[29]||(e[29]=[s("立即注册",-1)])]),_:1})])]),default:o(()=>[t(R,{model:i,"label-position":"top"},{default:o(()=>[t(F,{label:"用户名"},{default:o(()=>[t(C,{modelValue:i.username,"onUpdate:modelValue":e[3]||(e[3]=a=>i.username=a),placeholder:"请输入用户名",onKeyup:B(x,["enter"])},null,8,["modelValue"])]),_:1}),t(F,{label:"密码"},{default:o(()=>[t(C,{modelValue:i.password,"onUpdate:modelValue":e[4]||(e[4]=a=>i.password=a),type:"password","show-password":"",placeholder:"请输入密码",onKeyup:B(x,["enter"])},null,8,["modelValue"])]),_:1}),l("div",pe,[t(T,{modelValue:i.remember,"onUpdate:modelValue":e[5]||(e[5]=a=>i.remember=a)},{default:o(()=>[...e[26]||(e[26]=[s("记住登录",-1)])]),_:1},8,["modelValue"]),t(c,{type:"primary",underline:!1},{default:o(()=>[...e[27]||(e[27]=[s("忘记密码？",-1)])]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue"])]),_:1})}}},ye=G(_e,[["__scopeId","data-v-a992aca8"]]);export{ye as default};
