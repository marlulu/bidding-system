import{_ as k,r as g,h as x,i as S,a as R,j as q,c as B,o as D,d as e,w as o,e as r,u as I,g as s,b as L,t as j,E as y}from"./index-BfjmpUK-.js";import{b as A,u as F,c as G}from"./supplier-B0q6gocU.js";import"./request-CvP5yQdq.js";const O={class:"page-container"},T={__name:"Form",setup(z){const m=S(),_=I(),V=g(null),p=g(!1),c=x(()=>!!m.params.id),a=R({companyName:"",companyCode:"",legalPerson:"",contactName:"",contactPhone:"",contactEmail:"",address:"",industry:"",scale:"MEDIUM",status:0}),v={companyName:[{required:!0,message:"请输入公司名称",trigger:"blur"}],companyCode:[{required:!0,message:"请输入统一社会信用代码",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"}]},N=async()=>{if(c.value)try{const u=await A(m.params.id);Object.assign(a,u)}catch(u){console.error("加载数据失败",u)}},U=async()=>{try{await V.value.validate(),p.value=!0,c.value?(await F(m.params.id,a),y.success("更新成功")):(await G(a),y.success("创建成功")),_.push("/suppliers")}catch(u){console.error("提交失败",u)}finally{p.value=!1}},E=()=>{_.back()};return q(()=>{N()}),(u,l)=>{const d=r("el-input"),n=r("el-form-item"),i=r("el-option"),C=r("el-select"),f=r("el-radio"),P=r("el-radio-group"),b=r("el-button"),w=r("el-form"),M=r("el-card");return D(),B("div",O,[e(M,null,{header:o(()=>[L("span",null,j(c.value?"编辑供应商":"新建供应商"),1)]),default:o(()=>[e(w,{ref_key:"formRef",ref:V,model:a,rules:v,"label-width":"140px"},{default:o(()=>[e(n,{label:"公司名称",prop:"companyName"},{default:o(()=>[e(d,{modelValue:a.companyName,"onUpdate:modelValue":l[0]||(l[0]=t=>a.companyName=t),placeholder:"请输入公司名称"},null,8,["modelValue"])]),_:1}),e(n,{label:"统一社会信用代码",prop:"companyCode"},{default:o(()=>[e(d,{modelValue:a.companyCode,"onUpdate:modelValue":l[1]||(l[1]=t=>a.companyCode=t),placeholder:"请输入统一社会信用代码"},null,8,["modelValue"])]),_:1}),e(n,{label:"法人代表",prop:"legalPerson"},{default:o(()=>[e(d,{modelValue:a.legalPerson,"onUpdate:modelValue":l[2]||(l[2]=t=>a.legalPerson=t),placeholder:"请输入法人代表"},null,8,["modelValue"])]),_:1}),e(n,{label:"联系人",prop:"contactName"},{default:o(()=>[e(d,{modelValue:a.contactName,"onUpdate:modelValue":l[3]||(l[3]=t=>a.contactName=t),placeholder:"请输入联系人"},null,8,["modelValue"])]),_:1}),e(n,{label:"联系电话",prop:"contactPhone"},{default:o(()=>[e(d,{modelValue:a.contactPhone,"onUpdate:modelValue":l[4]||(l[4]=t=>a.contactPhone=t),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),e(n,{label:"联系邮箱",prop:"contactEmail"},{default:o(()=>[e(d,{modelValue:a.contactEmail,"onUpdate:modelValue":l[5]||(l[5]=t=>a.contactEmail=t),placeholder:"请输入联系邮箱"},null,8,["modelValue"])]),_:1}),e(n,{label:"公司地址",prop:"address"},{default:o(()=>[e(d,{modelValue:a.address,"onUpdate:modelValue":l[6]||(l[6]=t=>a.address=t),placeholder:"请输入公司地址"},null,8,["modelValue"])]),_:1}),e(n,{label:"行业分类",prop:"industry"},{default:o(()=>[e(d,{modelValue:a.industry,"onUpdate:modelValue":l[7]||(l[7]=t=>a.industry=t),placeholder:"请输入行业分类"},null,8,["modelValue"])]),_:1}),e(n,{label:"企业规模",prop:"scale"},{default:o(()=>[e(C,{modelValue:a.scale,"onUpdate:modelValue":l[8]||(l[8]=t=>a.scale=t),placeholder:"请选择企业规模"},{default:o(()=>[e(i,{label:"小型",value:"SMALL"}),e(i,{label:"中型",value:"MEDIUM"}),e(i,{label:"大型",value:"LARGE"})]),_:1},8,["modelValue"])]),_:1}),e(n,{label:"状态",prop:"status"},{default:o(()=>[e(P,{modelValue:a.status,"onUpdate:modelValue":l[9]||(l[9]=t=>a.status=t)},{default:o(()=>[e(f,{label:0},{default:o(()=>[...l[10]||(l[10]=[s("待审核",-1)])]),_:1}),e(f,{label:1},{default:o(()=>[...l[11]||(l[11]=[s("已认证",-1)])]),_:1}),e(f,{label:2},{default:o(()=>[...l[12]||(l[12]=[s("已拒绝",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,null,{default:o(()=>[e(b,{type:"primary",onClick:U,loading:p.value},{default:o(()=>[...l[13]||(l[13]=[s("提交",-1)])]),_:1},8,["loading"]),e(b,{onClick:E},{default:o(()=>[...l[14]||(l[14]=[s("取消",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}},Q=k(T,[["__scopeId","data-v-9bb0e60c"]]);export{Q as default};
