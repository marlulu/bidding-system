import{O as f,r,c as v,P as m,Q as I}from"./index-DCFAUsYj.js";import{r as s}from"./request--6APTGSy.js";function d(e){return s({url:"/auth/login",method:"post",data:e})}function p(){return s({url:"/auth/info",method:"get"})}const U=f("user",()=>{const e=r(null),t=r(""),u=async o=>{const n=await d(o);return t.value=n.token,e.value=n.userInfo,m(n.token),n},a=async()=>{const o=await p();return e.value=o,o},l=()=>{t.value="",e.value=null,I()},c=()=>e.value&&e.value.role==="ADMIN",i=()=>e.value&&e.value.role==="SUPPLIER",g=v(()=>!!t.value||!!localStorage.getItem("token"));return{userInfo:e,token:t,isLoggedIn:g,login:u,getUserInfo:a,logout:l,isAdmin:c,isSupplier:i}});export{U as u};
