import{_ as K,r as b,b as v,s as O,k as P,o as z,g as l,w as a,e as r,E as V,G as Q,D as U,i as w,H as R,j as d,V as W,d as J,t as E,W as X,h as Y,S as Z,K as ee}from"./index-Dg0MfX17.js";import{a as le,d as te,b as ae,u as oe}from"./expert-CPqleW9Y.js";const ne={class:"app-container"},se={__name:"List",setup(ie){const _=b(!0),C=b([]),x=b(0),f=v({page:1,size:10}),u=v({name:null,specialty:null}),c=b(!1),y=b(""),D=v({update:"编辑专家",create:"新增专家"}),o=v({id:void 0,name:"",specialty:"",title:"",phone:"",email:"",description:""}),B=v({name:[{required:!0,message:"专家姓名不能为空",trigger:"blur"}],specialty:[{required:!0,message:"专业领域不能为空",trigger:"blur"}],phone:[{required:!0,message:"联系电话不能为空",trigger:"blur"}]}),p=async()=>{_.value=!0;try{const n=await le({...f,...u});C.value=n.records,x.value=n.total}catch(n){console.error("加载专家列表失败",n),V.error("加载专家列表失败")}finally{_.value=!1}},S=()=>{f.page=1,p()},L=()=>{u.name=null,u.specialty=null,f.page=1,p()},T=()=>{o.id=void 0,o.name="",o.specialty="",o.title="",o.phone="",o.email="",o.description=""},j=()=>{T(),y.value="create",c.value=!0},M=()=>{const{id:n,...e}=o;ae(e).then(()=>{p(),c.value=!1,V.success("新增成功")})},$=n=>{Object.assign(o,n),y.value="update",c.value=!0},q=()=>{oe(o.id,o).then(()=>{p(),c.value=!1,V.success("更新成功")})},F=n=>{ee.confirm("确定删除该专家吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{te(n.id).then(()=>{p(),V.success("删除成功")})}).catch(()=>{V.info("已取消删除")})};return O(()=>{p()}),(n,e)=>{const g=r("el-button"),m=r("el-input"),s=r("el-form-item"),k=r("el-form"),i=r("el-table-column"),N=r("el-table"),h=r("el-pagination"),I=r("el-card"),A=r("el-dialog"),G=Q("loading");return z(),P("div",ne,[l(I,{class:"box-card"},{header:a(()=>[e[14]||(e[14]=Y("span",null,"专家库管理",-1)),l(g,{style:{float:"right",padding:"3px 0"},type:"text",icon:w(Z),onClick:j},{default:a(()=>[...e[13]||(e[13]=[d("新增专家",-1)])]),_:1},8,["icon"])]),default:a(()=>[l(k,{inline:!0,model:u,class:"demo-form-inline"},{default:a(()=>[l(s,{label:"专家姓名"},{default:a(()=>[l(m,{modelValue:u.name,"onUpdate:modelValue":e[0]||(e[0]=t=>u.name=t),placeholder:"请输入专家姓名"},null,8,["modelValue"])]),_:1}),l(s,{label:"专业领域"},{default:a(()=>[l(m,{modelValue:u.specialty,"onUpdate:modelValue":e[1]||(e[1]=t=>u.specialty=t),placeholder:"请输入专业领域"},null,8,["modelValue"])]),_:1}),l(s,null,{default:a(()=>[l(g,{type:"primary",icon:w(R),onClick:S},{default:a(()=>[...e[15]||(e[15]=[d("查询",-1)])]),_:1},8,["icon"]),l(g,{icon:w(W),onClick:L},{default:a(()=>[...e[16]||(e[16]=[d("重置",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),U((z(),J(N,{data:C.value,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""},{default:a(()=>[l(i,{align:"center",label:"ID",width:"95"},{default:a(({row:t})=>[d(E(t.id),1)]),_:1}),l(i,{label:"专家姓名",prop:"name"}),l(i,{label:"专业领域",prop:"specialty"}),l(i,{label:"职称",prop:"title"}),l(i,{label:"联系电话",prop:"phone"}),l(i,{label:"邮箱",prop:"email"}),l(i,{label:"简介",prop:"description","show-overflow-tooltip":""}),l(i,{label:"创建时间",prop:"createTime",width:"160"},{default:a(({row:t})=>[d(E(t.createTime),1)]),_:1}),l(i,{label:"操作",align:"center",width:"180","class-name":"small-padding fixed-width"},{default:a(({row:t})=>[l(g,{type:"primary",size:"small",onClick:H=>$(t)},{default:a(()=>[...e[17]||(e[17]=[d("编辑",-1)])]),_:1},8,["onClick"]),l(g,{size:"small",type:"danger",onClick:H=>F(t)},{default:a(()=>[...e[18]||(e[18]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[G,_.value]]),U(l(h,{total:x.value,"current-page":f.page,"onUpdate:currentPage":e[2]||(e[2]=t=>f.page=t),"page-size":f.size,"onUpdate:pageSize":e[3]||(e[3]=t=>f.size=t),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:p,onCurrentChange:p,style:{"margin-top":"20px","justify-content":"flex-end"}},null,8,["total","current-page","page-size"]),[[X,x.value>0]])]),_:1}),l(A,{title:D[y.value],modelValue:c.value,"onUpdate:modelValue":e[12]||(e[12]=t=>c.value=t)},{footer:a(()=>[l(g,{onClick:e[10]||(e[10]=t=>c.value=!1)},{default:a(()=>[...e[19]||(e[19]=[d("取消",-1)])]),_:1}),l(g,{type:"primary",onClick:e[11]||(e[11]=t=>y.value==="create"?M():q())},{default:a(()=>[...e[20]||(e[20]=[d("确认",-1)])]),_:1})]),default:a(()=>[l(k,{ref:"dataForm",rules:B,model:o,"label-position":"left","label-width":"100px",style:{width:"400px","margin-left":"50px"}},{default:a(()=>[l(s,{label:"专家姓名",prop:"name"},{default:a(()=>[l(m,{modelValue:o.name,"onUpdate:modelValue":e[4]||(e[4]=t=>o.name=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"专业领域",prop:"specialty"},{default:a(()=>[l(m,{modelValue:o.specialty,"onUpdate:modelValue":e[5]||(e[5]=t=>o.specialty=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"职称",prop:"title"},{default:a(()=>[l(m,{modelValue:o.title,"onUpdate:modelValue":e[6]||(e[6]=t=>o.title=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"联系电话",prop:"phone"},{default:a(()=>[l(m,{modelValue:o.phone,"onUpdate:modelValue":e[7]||(e[7]=t=>o.phone=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"邮箱",prop:"email"},{default:a(()=>[l(m,{modelValue:o.email,"onUpdate:modelValue":e[8]||(e[8]=t=>o.email=t)},null,8,["modelValue"])]),_:1}),l(s,{label:"专家简介",prop:"description"},{default:a(()=>[l(m,{modelValue:o.description,"onUpdate:modelValue":e[9]||(e[9]=t=>o.description=t),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])])}}},ue=K(se,[["__scopeId","data-v-c9eea567"]]);export{ue as default};
