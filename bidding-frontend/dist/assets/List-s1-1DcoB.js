import{_ as K,r as x,a as z,k as O,c,o as u,b as d,d as e,D as Q,w as o,e as n,G as W,l as V,q as T,u as X,F as E,v as C,m as p,H as Y,g as _,t as f,z as Z,A as ee,B as te}from"./index-CwdD4deP.js";import{g as le}from"./announcement-DnN4TC_l.js";import{u as oe}from"./user-aF9AZa0U.js";import"./request-Be6PAf_2.js";const ae={class:"announcement-list container"},ne={key:0,class:"card-tag"},se={class:"title"},re={class:"info"},ue={class:"price"},de={class:"card-footer"},ie={class:"pagination"},ce={__name:"List",setup(pe){const D=X(),N=oe(),y=x(!1),v=x([]),U=["信息技术","建筑工程","医疗器械","办公用品","咨询服务","物流运输"],A=["北京","上海","广州","深圳","杭州","成都","武汉"],s=z({industry:"",region:"",type:"",keyword:""}),r=z({page:1,size:9,total:0}),b=async()=>{y.value=!0;try{const a=await le({page:r.page,size:r.size,...s});v.value=a.records,r.total=a.total}catch(a){console.error("加载列表失败",a)}finally{y.value=!1}},B=()=>{r.page=1,b()},S=a=>{D.push(`/announcements/detail/${a}`)},L=a=>a?a.toLocaleString():"面议",I=a=>a?a.split(" ")[0]:"-",R=a=>({BID:"招标公告",CHANGE:"变更公告",TERMINATE:"终止公告",RESULT:"中标公示"})[a]||a,M=a=>({BID:"",CHANGE:"warning",TERMINATE:"danger",RESULT:"success"})[a]||"";return O(()=>{b()}),(a,l)=>{const i=n("el-option"),k=n("el-select"),m=n("el-form-item"),g=n("el-icon"),w=n("el-button"),G=n("el-input"),H=n("el-form"),h=n("el-card"),F=n("el-tag"),$=n("el-col"),j=n("el-row"),q=n("el-empty"),P=n("el-pagination"),J=W("loading");return u(),c("div",ae,[l[10]||(l[10]=d("h1",{class:"page-title"},"招标信息门户",-1)),e(h,{class:"filter-card",shadow:"never"},{default:o(()=>[e(H,{inline:!0,model:s},{default:o(()=>[e(m,{label:"行业分类"},{default:o(()=>[e(k,{modelValue:s.industry,"onUpdate:modelValue":l[0]||(l[0]=t=>s.industry=t),placeholder:"全部行业",clearable:"",style:{width:"150px"}},{default:o(()=>[(u(),c(E,null,C(U,t=>e(i,{key:t,label:t,value:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"地区"},{default:o(()=>[e(k,{modelValue:s.region,"onUpdate:modelValue":l[1]||(l[1]=t=>s.region=t),placeholder:"全部地区",clearable:"",style:{width:"150px"}},{default:o(()=>[(u(),c(E,null,C(A,t=>e(i,{key:t,label:t,value:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"公告类型"},{default:o(()=>[e(k,{modelValue:s.type,"onUpdate:modelValue":l[2]||(l[2]=t=>s.type=t),placeholder:"全部类型",clearable:"",style:{width:"150px"}},{default:o(()=>[e(i,{label:"招标公告",value:"BID"}),e(i,{label:"变更公告",value:"CHANGE"}),e(i,{label:"终止公告",value:"TERMINATE"}),e(i,{label:"中标公示",value:"RESULT"})]),_:1},8,["modelValue"])]),_:1}),e(m,null,{default:o(()=>[e(G,{modelValue:s.keyword,"onUpdate:modelValue":l[3]||(l[3]=t=>s.keyword=t),placeholder:"搜索项目名称/编号",clearable:"",style:{width:"250px"}},{append:o(()=>[e(w,{onClick:B},{default:o(()=>[e(g,null,{default:o(()=>[e(p(Y))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),p(N).isAdmin()?(u(),V(m,{key:0},{default:o(()=>[e(w,{type:"success",onClick:l[4]||(l[4]=t=>p(D).push("/announcements/create"))},{default:o(()=>[...l[7]||(l[7]=[_("发布公告",-1)])]),_:1})]),_:1})):T("",!0)]),_:1},8,["model"])]),_:1}),Q((u(),c("div",null,[e(j,{gutter:20},{default:o(()=>[(u(!0),c(E,null,C(v.value,t=>(u(),V($,{xs:24,sm:12,md:8,key:t.id},{default:o(()=>[e(h,{class:"card-item announcement-card",shadow:"hover",onClick:_e=>S(t.id)},{default:o(()=>[t.isTop?(u(),c("div",ne,"置顶")):T("",!0),d("h3",se,f(t.title),1),d("div",re,[d("p",null,[e(g,null,{default:o(()=>[e(p(Z))]),_:1}),_(" 地区："+f(t.region||"全国"),1)]),d("p",null,[e(g,null,{default:o(()=>[e(p(ee))]),_:1}),l[8]||(l[8]=_(" 预算：",-1)),d("span",ue,"￥"+f(L(t.projectBudget)),1)]),d("p",null,[e(g,null,{default:o(()=>[e(p(te))]),_:1}),_(" 截止："+f(I(t.bidDeadline)),1)])]),d("div",de,[e(F,{type:M(t.type),size:"small"},{default:o(()=>[_(f(R(t.type)),1)]),_:2},1032,["type"]),e(w,{type:"primary",link:""},{default:o(()=>[...l[9]||(l[9]=[_("立即投标",-1)])]),_:1})])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}),v.value.length===0?(u(),V(q,{key:0,description:"暂无相关招标信息"})):T("",!0),d("div",ie,[e(P,{"current-page":r.page,"onUpdate:currentPage":l[5]||(l[5]=t=>r.page=t),"page-size":r.size,"onUpdate:pageSize":l[6]||(l[6]=t=>r.size=t),total:r.total,layout:"total, prev, pager, next, jumper",onCurrentChange:b},null,8,["current-page","page-size","total"])])])),[[J,y.value]])])}}},ve=K(ce,[["__scopeId","data-v-3744218c"]]);export{ve as default};
